# نظام الترتيب في السجلات الأسبوعية

## التغييرات المنفذة

### 1. تغيير اسم التبويب
- تم تغيير اسم "السجلات الأساسية" إلى "أسبوعية" في صفحة الإدمن
- يعكس الاسم الجديد الغرض الفعلي من هذا التبويب

### 2. تحديث أعمدة الجدول الأسبوعي
تم تعديل أعمدة الجدول لتشمل:
- **اسم الطالب**: اسم الطالب
- **الحلقة**: اسم الحلقة (في صفحة الإدمن فقط)
- **الصفحات المسمعة**: عدد الصفحات التي تم تسميعها (استثناء الإعادات)
- **عدد الاختبارات**: عدد الاختبارات التي أداها الطالب
- **آخر صفحة**: آخر صفحة وصل إليها الطالب
- **الغيابات**: عدد أيام الغياب في الأسبوع

### 3. حذف الأعمدة
تم حذف الأعمدة التالية من العرض الأسبوعي:
- ❌ صفحات المراجعة
- ❌ الأحاديث

### 4. نظام الترتيب الجديد
تم تطبيق نظام ترتيب تلقائي للطلاب من الأعلى إلى الأدنى بناءً على:

**معادلة الترتيب:**
```
نقاط الترتيب = عدد الصفحات + (عدد الاختبارات × 2)
```

**مثال:**
- طالب لديه 10 صفحات و 3 اختبارات = 10 + (3 × 2) = 16 نقطة
- طالب لديه 12 صفحات و 2 اختبار = 12 + (2 × 2) = 16 نقطة
- طالب لديه 8 صفحات و 1 اختبار = 8 + (1 × 2) = 10 نقاط

**المنطق:**
- كل اختبار يعادل تقريباً صفحتين من التسميع
- يتم ترتيب الطلاب تنازلياً (الأعلى نقاطاً في الأعلى)

### 5. التطبيق
تم تطبيق هذه التغييرات في:
- ✅ صفحة سجلات الطلاب للأستاذ (`StudentRecords.tsx`)
  - العرض الأسبوعي (weekly)
  - عرض أسابيع الشهر (monthWeeks)
- ✅ صفحة سجلات الطلاب للإدمن (`AdminStudentRecords.tsx`)
  - العرض الأسبوعي (weekly)

### 6. البيانات المعروضة
- **الصفحات المسمعة**: تشمل فقط الصفحات التي لم تكن إعادة
- **الاختبارات**: جميع الاختبارات في الفترة الأسبوعية
- **آخر صفحة**: آخر رقم صفحة تم تسميعه (من أرقام الصفحات المحفوظة)
- **الغيابات**: عدد الأيام التي كان فيها الطالب غائباً

### 7. التصدير إلى Excel
تم تحديث وظيفة التصدير لتشمل الأعمدة الجديدة:
- الرقم
- اسم الطالب
- الحلقة
- الصفحات المسمعة
- عدد الاختبارات
- آخر صفحة
- الغيابات

## الملفات المعدلة
1. `src/pages/StudentRecords.tsx`
2. `src/pages/AdminStudentRecords.tsx`

## التاريخ
14 ديسمبر 2024
